(this["webpackJsonpbook-playlist-frontend"]=this["webpackJsonpbook-playlist-frontend"]||[]).push([[0],{35:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r,c,a,i,o=t(4),s=t(25),d=t.n(s),b=(t(35),t(21)),j=t(6),l=t(13),u=t(46),h=t(15),O=t(22),x=t.n(O),m=x()(r||(r=Object(h.a)(["\n  {\n    books {\n      name\n      id\n    }\n  }\n"]))),p=x()(c||(c=Object(h.a)(["\n  {\n    authors {\n      name\n      id\n    }\n  }\n"]))),k=x()(a||(a=Object(h.a)(["\n  mutation($name: String!, $genre: String!, $authorId: ID!) {\n    addBook(name: $name, genre: $genre, authorId: $authorId) {\n      name\n      id\n    }\n  }\n"]))),f=x()(i||(i=Object(h.a)(["\n  query($id: ID) {\n    book(id: $id) {\n      id\n      name\n      genre\n      author {\n        id\n        name\n        age\n        books {\n          name\n          id\n        }\n      }\n    }\n  }\n"]))),g=t(3),v=function(e){var n=e.data.book;return n?Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:n.name}),Object(g.jsxs)("p",{children:["Genre: ",Object(g.jsx)("span",{children:n.genre})]}),Object(g.jsxs)("p",{children:["Author: ",Object(g.jsx)("span",{children:n.author.name})]}),Object(g.jsx)("p",{children:"All books by this author:"}),Object(g.jsx)("ul",{className:"other-books",children:n.author.books.map((function(e){return Object(g.jsx)("li",{children:e.name},e.id)}))})]}):Object(g.jsx)("h3",{children:"No book selected..."})},y=Object(u.a)(f,{options:function(e){return{variables:{id:e.bookId}}}})((function(e){return Object(g.jsx)("div",{id:"book-details",children:v(e)})})),I=Object(u.a)(m)((function(e){var n=Object(o.useState)(null),t=Object(l.a)(n,2),r=t[0],c=t[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)("ul",{id:"book-list",children:function(){var n=e.data;return n.error?Object(g.jsx)("h3",{children:"Opps! Something went wrong, please come back later!"}):n.loading?Object(g.jsx)("div",{children:"Loading books..."}):n.books.map((function(e){return Object(g.jsx)("li",{onClick:function(n){c(e.id)},children:Object(g.jsx)("button",{className:"bttn-material-flat bttn-sm bttn-success",children:e.name})},e.id)}))}()}),Object(g.jsx)(y,{bookId:r})]})})),S=t(30),N=function(e){var n=e.getAuthorsQuery;return n.error?Object(g.jsx)("option",{disabled:!0,children:"None"}):n.loading?Object(g.jsx)("option",{disabled:!0,children:"Loading authors"}):n.authors.map((function(e){return Object(g.jsx)("option",{value:e.id,children:e.name},e.id)}))},$=Object(S.flowRight)(Object(u.a)(p,{name:"getAuthorsQuery"}),Object(u.a)(k,{name:"addBookMutation"}))((function(e){var n=Object(o.useState)(""),t=Object(l.a)(n,2),r=t[0],c=t[1],a=Object(o.useState)(""),i=Object(l.a)(a,2),s=i[0],d=i[1],b=Object(o.useState)(""),j=Object(l.a)(b,2),u=j[0],h=j[1];return Object(g.jsxs)("form",{id:"add-book",onSubmit:function(n){n.preventDefault(),e.addBookMutation({variables:{name:r,genre:s,authorId:u},refetchQueries:[{query:m}]})},children:[Object(g.jsxs)("div",{className:"field",children:[Object(g.jsx)("label",{children:"Book name:"}),Object(g.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(g.jsxs)("div",{className:"field",children:[Object(g.jsx)("label",{children:"Genre:"}),Object(g.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(g.jsxs)("div",{className:"field",children:[Object(g.jsx)("label",{children:"Author:"}),Object(g.jsxs)("select",{onChange:function(e){return h(e.target.value)},required:!0,children:[Object(g.jsx)("option",{children:"Select author"}),N(e)]})]}),Object(g.jsx)("button",{className:"bttn-material-circle bttn-md bttn-danger",children:"+"})]})})),q=new b.a({uri:"".concat("https://book-playlist-backend.herokuapp.com","/graphql")});var w=function(){return Object(g.jsx)(j.b,{client:q,children:Object(g.jsxs)("div",{id:"main",children:[Object(g.jsx)("h1",{children:"Kirin Tran's Book PlayList"}),Object(g.jsx)(I,{}),Object(g.jsx)($,{})]})})};d.a.render(Object(g.jsx)(w,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.2c2e547c.chunk.js.map